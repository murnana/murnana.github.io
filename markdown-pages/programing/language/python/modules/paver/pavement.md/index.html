<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1ddd39c799ecca2c60ce.css">*{margin:0;padding:0;border:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;list-style:inside}.clearfix:after{content:"";clear:both;display:inherit}.layout{width:100vw;max-width:none;height:100vh;max-height:none;overflow-x:hidden;overflow-y:auto}.layout>main{margin-right:3.6rem;padding:2rem 0 2rem 2rem;width:calc(100vw - 6.6rem);max-width:none;overflow-wrap:break-word}.layout>button.menu{width:3rem;max-width:none;height:3rem;max-height:none;position:fixed;right:0;top:0;opacity:.2;background-color:#fff;border:.3rem double #000;border-radius:.5rem;text-align:center;font-size:.7rem;color:#000}.layout>button.menu:hover{opacity:1}.layout>nav.menu{width:100vw;max-width:none;height:100vh;max-height:none;position:fixed;z-index:1;overflow-y:auto;overflow-wrap:break-word}.layout>nav.menu>.dialog{position:fixed;top:0;right:0;max-width:calc(100vw - 4.6rem);max-height:calc(100vh - 4.6rem);margin:.2rem;padding:1rem;background-color:#fff;border:.3rem double #000;border-radius:.5rem;text-align:left;font-size:100%;color:grey}.layout>nav.menu>ul>li{list-style:none}.layout>nav.menu>ul>li>*{text-decoration:none}.layout>nav.menu>ul>li>:link{color:#000}</style><meta name="generator" content="Gatsby 2.20.27"/><link as="script" rel="preload" href="/webpack-runtime-bd764cbdbc8d0cacfb43.js"/><link as="script" rel="preload" href="/framework-e5dc7793c9d7bc935506.js"/><link as="script" rel="preload" href="/styles-1c3c06048fccead674b8.js"/><link as="script" rel="preload" href="/app-d52bcde7c87186f41496.js"/><link as="script" rel="preload" href="/component---src-templates-markdown-pages-template-js-9e0b5e152df8c2c5a7b4.js"/><link as="fetch" rel="preload" href="/page-data/markdown-pages/programing/language/python/modules/paver/pavement.md/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout"><button class="menu">Menu</button><main><article><h1>Pavement.pyの中身</h1><div><h1>このファイルは？</h1>
<p>タスクを読み込むエントリポイントのようなもの。
ファイル名、位置はルートディレクトリに置く。</p>
<p>※マルチバイトのコメントを打つと怒りだします 　なぜだ...</p>
<h1>一例</h1>
<pre><code class="language-{.python}">"""
Sphinxドキュメントを生成するタスク
通常、Paverのdoctoolsを使うのだが、このプロジェクトの構造に合わせたいので作成
"""

import shutil, sphinx.cmd.build, sphinx.ext.apidoc
from paver.easy import dry, task, needs
from pathlib import Path

_sphinx_path = 'sphinx'
_doctree_path = 'sphinx/__doctree__'
_api_reSt_path = Path('sphinx', 'docs', '_modules')
_module_path = Path('src')
_docs_path = 'docs'

def create_apidoc(option):
    """
    APIドキュメントの作成

        :param list[str] option: sphinx-apidocオプション

    """
    sphinx.ext.apidoc.main(option)



def build(option):
    """
    reStructuredTextからSphinxによるビルド

        :param list[str] option: sphinx-buildオプション

    """
    sphinx.cmd.build.main(option)



def clear(dir):
    """
    ディレクトリごと削除
        :param str dir:ディレクトリ
    """
    if(Path(dir).exists()):
        print('%s is delete...' % dir)
        shutil.rmtree(dir)
        print('%s is done delete!' % dir)


def get_dirlist(path):
    list = [p for p in path.iterdir() if p.is_dir()]
    for p in list:
        list += get_dirlist(p)
    return [p for p in list if p != None]


@task
def cleanup_docs():
    clear(_api_reSt_path)
    clear(_doctree_path)
    clear(_docs_path)


@task
def create_docs():
    """
    ドキュメント生成

        :param list[str] option: sphinx-buildオプション

    """
    for p in get_dirlist(_module_path):
        if(p.name == '__pycache__'): continue
        relative = p.relative_to(_module_path)
        input_path = str(p)
        out_path = str(_api_reSt_path.joinpath(relative))
        # print(input_path)
        # print(out_path)
        create_apidoc(['-f', '--follow-links', '-o', out_path, input_path])

    build(['-b', 'html', '-d', _doctree_path, _sphinx_path, _docs_path])

@task
def recreate_docs():
    cleanup_docs()
    create_docs()
</code></pre>
<pre><code class="language-{.python}">"""
Paver Setup
"""
import os, sys
from paver.easy import options
from paver.setuputils import setup

sys.path.insert(0, os.path.abspath('.'))
sys.path.insert(0, os.path.abspath('../task'))

options(
    setup=dict(
        name='study-with-python',
        packages=[],
        version='0.0.0',
        url='https://github.com/murnana/study-with-python/',
        install_requires=['paver','pipenv']
    )
)

from task import create_doc
</code></pre>
<h1>タスクの基本</h1>
<p>定義するには <code>@task</code> を使用します</p>
<pre><code class="language-{.python}">from paver.easy import task

@task
def sample_task():
    print('さんぷる')
</code></pre>
<p>この場合は、 <code>sample_task</code> という名前のタスクになります</p>
<h1>依存タスク</h1>
<p>自分より前に実行されなければならないタスクがある場合は <code>@needs</code>
を使います</p>
<pre><code class="language-{.python}">from paver.easy import task, needs

@task
@needs(['sample_prev_task'])
def sample_task():
    print('さんぷる')
</code></pre>
<h1>実行方法</h1>
<p>コマンドラインもしくはターミナルに</p>
<pre><code class="language-{.bat}">paver sample_prev_task
</code></pre>
<p>と書くだけ</p>
<h1>参考</h1>
<ul>
<li><a href="https://paver.github.io/paver-docs-jp/pavement.html">徹底的に pavement.py --- Paver v1.0.1
documentation</a></li>
</ul></div></article></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/markdown-pages/programing/language/python/modules/paver/pavement.md";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d52bcde7c87186f41496.js"],"component---src-pages-hobby-index-js":["/component---src-pages-hobby-index-js-a6ca140d9313836e4b07.js"],"component---src-pages-hobby-sdorica-js":["/component---src-pages-hobby-sdorica-js-7f98227ffeb140465681.js"],"component---src-pages-index-js":["/component---src-pages-index-js-50ddbdebe6320eab3f9b.js"],"component---src-templates-markdown-pages-template-js":["/component---src-templates-markdown-pages-template-js-9e0b5e152df8c2c5a7b4.js"]};/*]]>*/</script><script src="/component---src-templates-markdown-pages-template-js-9e0b5e152df8c2c5a7b4.js" async=""></script><script src="/app-d52bcde7c87186f41496.js" async=""></script><script src="/styles-1c3c06048fccead674b8.js" async=""></script><script src="/framework-e5dc7793c9d7bc935506.js" async=""></script><script src="/webpack-runtime-bd764cbdbc8d0cacfb43.js" async=""></script></body></html>